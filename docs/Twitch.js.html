<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>JSDoc: Source: Twitch.js</title>

        <script src="scripts/prettify/prettify.js"></script>
        <script src="scripts/prettify/lang-css.js"></script>
        <!--[if lt IE 9]>
            <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
        <link
            type="text/css"
            rel="stylesheet"
            href="styles/prettify-tomorrow.css"
        />
        <link
            type="text/css"
            rel="stylesheet"
            href="styles/jsdoc-default.css"
        />
    </head>

    <body>
        <div id="main">
            <h1 class="page-title">Source: Twitch.js</h1>

            <section>
                <article>
                    <pre
                        class="prettyprint source linenums"
                    ><code>const { TWITCH_TOKEN } = require("../../.env"),
    fetch = require("node-fetch");

/**
 * Is Live
 * @param {Twitch.User} user - twitch user
 */
const isLive = async ({ user }) => {
    return fetch(`https://api.twitch.tv/kraken/streams/${user._id}`, {
        method: "get",
        headers: {
            "client-id": `${TWITCH_TOKEN}`,
            Accept: `application/vnd.twitchtv.v5+json`,
        },
    })
        .then((res) => res.json())
        .then((data) => {
            if (data.stream != null) {
                return {
                    name: user.name,
                    game: data.stream.game,
                    url: data.stream.channel.url,
                };
            }
        });
};
const getUser = async ({ username }) => {
    return fetch(`https://api.twitch.tv/kraken/users?login=${username}`, {
        method: "get",
        headers: {
            "client-id": `${TWITCH_TOKEN}`,
            Accept: `application/vnd.twitchtv.v5+json`,
        },
    })
        .then((res) => res.json())
        .then(async (data) => {
            return await isLive({ user: data.users[0] });
        });
};

module.exports = {
    isLive,
    getUser,
};
</code></pre>
                </article>
            </section>
        </div>

        <nav>
            <h2><a href="index.html">Home</a></h2>
            <h3>Global</h3>
            <ul>
                <li><a href="global.html#isLive">isLive</a></li>
            </ul>
        </nav>

        <br class="clear" />

        <footer>
            Documentation generated by
            <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a> on Sun Feb
            07 2021 03:44:47 GMT-0800 (Pacific Standard Time)
        </footer>

        <script>
            prettyPrint();
        </script>
        <script src="scripts/linenumber.js"></script>
    </body>
</html>
